<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>分野選択 - DX×AIが変える、10年後の日本</title>
  <link rel="stylesheet" href="assets/css/base.css">
  <link rel="stylesheet" href="assets/css/home.css">
  <link rel="stylesheet" href="assets/css/statistics.css">
  <link rel="stylesheet" href="assets/css/tree-layout.css">
  <link rel="stylesheet" href="assets/css/plan-selection.css">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1>🏛️ DX×AIが変える、10年後の日本</h1>
      <nav>
        <a href="#" id="changeProfileLink" class="profile-link">前提条件を変更する</a>
      </nav>
    </div>
  </header>

  <main class="hub-container">
            <!-- 都市イメージバナー -->
            <div class="top-image-banner">
              <img src="assets/img/future_tokyo.jpg" alt="都市イメージ" class="top-image-banner-img">
              <div class="top-image-overlay"></div>
            </div>
        <!-- デモモード説明カード（統計セクション風デザイン） -->
        <div id="demoModeInfoCard" class="demo-mode-info-card" style="display: none;">
          <div class="demo-mode-info-content statistics-header" style="background: #fff; border-radius: 16px; box-shadow: 0 4px 16px rgba(59,130,246,0.08); padding: 2rem 1.5rem; margin-bottom: 2rem; display: flex; align-items: flex-start; gap: 1.5rem;">
            <div class="demo-mode-info-icon" style="font-size: 2.5rem; color: #3b82f6;">🎯</div>
            <div style="flex:1; display: flex; flex-direction: column; min-width:0;">
              <h2 style="font-size: 1.3rem; color: #1e293b; margin-bottom: 0.5rem;">デモモードのご案内</h2>
              <ul style="color: #475569; font-size: 1rem; margin-bottom: 1rem;">
                <li>このモードは、DX×AIの価値を直感的に理解したい実務者・意思決定者・分析職向けです。</li>
                <li>DX・AI導入による社会変化をシミュレーションできます。</li>
                <li>「プラン選択」機能で各プランの効果をグラフで比較できます。</li>
                <li>「カスタムプラン」で分野ごとにDXレベルを個別設定し、詳細な分析が可能です。</li>
              </ul>
              <div style="flex:1"></div>
              <div style="display: flex; justify-content: flex-end;">
                <button id="closeDemoModeInfoBtn" class="demo-mode-info-close-btn" style="background: #3b82f6; color: #fff; border: none; border-radius: 8px; padding: 0.5rem 1.2rem; font-size: 1rem; cursor: pointer;">閉じる</button>
              </div>
            </div>
          </div>
        </div>
    <!-- キャラクター情報バー -->
    <div id="characterInfoBar" class="character-info-bar">
      <!-- home.jsで動的生成 -->
    </div>

    <div class="hub-intro">
      <h2>分野別DX・AI導入効果シミュレーション</h2>
      <p>各分野におけるDX・AI導入の効果や社会的インパクトを客観的に比較・分析できます</p>
    </div>

    <!-- 戦略ボードへのリンク -->
    <div class="strategy-board-banner" id="strategyBoardBanner">
      <div class="banner-content">
        <div class="banner-icon">🎮</div>
        <div class="banner-text">
          <h3 class="banner-title">戦略ボード - 資源配分を最適化しよう</h3>
          <p class="banner-subtitle">ポイント制限の中で各分野への投資を決定するゲーム体験</p>
        </div>
      </div>
      <a href="strategy.html" class="strategy-board-cta">
        今すぐ始める →
      </a>
    </div>

    <!-- デモモード専用: プラン選択セクション -->
    <section id="planSelection" class="plan-selection" style="display: none;">
      <div class="plan-selection-header">
        <h2 style="color: #ffffff;">🎯 DX導入プランを選択</h2>
        <p class="plan-selection-description">目的に応じた最適なプランをお選びください。各プランの効果は下部の分析で確認できます。</p>
      </div>

      <div class="plan-cards">
        <div class="plan-card" data-plan="plain">
          <div class="plan-icon">📊</div>
          <h3 class="plan-title">電子化のみ</h3>
          <p class="plan-subtitle">最小限のDX</p>
          <ul class="plan-features">
            <li>全分野: Plain</li>
            <li>コスト: ￥0</li>
          </ul>
        </div>

        <div class="plan-card" data-plan="cost">
          <div class="plan-icon">💰</div>
          <h3 class="plan-title">コスト重視</h3>
          <p class="plan-subtitle">予算制約がある場合</p>
          <ul class="plan-features">
            <li>行政・医療: Smart</li>
            <li>その他: Plain</li>
            <li>コスト: 約￥8千万</li>
          </ul>
        </div>

        <div class="plan-card" data-plan="basic">
          <div class="plan-icon">📋</div>
          <h3 class="plan-title">基本プラン</h3>
          <p class="plan-subtitle">標準的なバランス</p>
          <ul class="plan-features">
            <li>Smart中心の導入</li>
            <li>低リスク・段階的</li>
            <li>コスト: 約￥1億</li>
          </ul>
        </div>

        <div class="plan-card plan-card-recommended" data-plan="recommended">
          <div class="plan-badge">おすすめ</div>
          <div class="plan-icon">⭐</div>
          <h3 class="plan-title">推奨プラン</h3>
          <p class="plan-subtitle">依存度最適化</p>
          <ul class="plan-features">
            <li>行政・医療: AI</li>
            <li>依存度に基づく最適配置</li>
            <li>コスト: 約￥2億</li>
          </ul>
        </div>

        <div class="plan-card" data-plan="emergency">
          <div class="plan-icon">🚨</div>
          <h3 class="plan-title">緊急対応優先</h3>
          <p class="plan-subtitle">人命重視</p>
          <ul class="plan-features">
            <li>医療・災害: AI</li>
            <li>人命に関わる分野優先</li>
            <li>コスト: 約￥2.5億</li>
          </ul>
        </div>

        <div class="plan-card" data-plan="advanced">
          <div class="plan-icon">🚀</div>
          <h3 class="plan-title">最先端プラン</h3>
          <p class="plan-subtitle">全面AI化</p>
          <ul class="plan-features">
            <li>全分野: AI</li>
            <li>最大効果</li>
            <li>コスト: 約￥3.5億</li>
          </ul>
        </div>
      </div>

      <!-- カスタムプラン（折りたたみ） -->
      <div class="custom-plan-section">
        <button id="toggleCustomPlan" class="toggle-custom-btn">
          <span class="toggle-icon">▶</span>
          カスタムプラン（個別に設定）
        </button>
        <div id="customPlanContent" class="custom-plan-content" style="display: none;">
          <p class="custom-plan-note">各分野のDXレベルを個別に設定できます。下記のツリービューで調整してください。</p>
        </div>
      </div>
    </section>

    <!-- デスクトップ: リング配置 / モバイル: グリッド -->
    <div id="domainHub" class="domain-hub" role="navigation" aria-label="分野選択">
      <!-- home.jsで動的生成 -->
    </div>

    <div class="hub-note">
      <p>※ 本デモは制度・施設運用の単純化・誇張を含みます。実際の効果は環境により異なります。</p>
    </div>


    <!-- 統計分析セクション（初期状態は非表示） -->
    <section id="statisticsSection" class="statistics-section" style="display: block;">
      <div class="statistics-header">
        <h2>🌍 社会全体への波及効果分析</h2>
      </div>

      <!-- メトリクスカード -->
      <div class="metrics-container">
        <div class="metric-card reduction">
          <div class="metric-label">📊 流通件数削減率</div>
          <div class="metric-value" id="reductionPercentage">--%</div>
          <div class="metric-detail" id="reductionDetail">件数削減</div>
        </div>

        <div class="metric-card time">
          <div class="metric-label">⏱️ 必要時間削減</div>
          <div class="metric-value" id="timeSaving">--日分</div>
          <div class="metric-detail" id="timeSavingDetail">年間削減</div>
        </div>

        <div class="metric-card cost">
          <div class="metric-label">💰 コスト削減</div>
          <div class="metric-value" id="costSaving">￥--</div>
          <div class="metric-detail" id="costSavingDetail">月額削減</div>
        </div>

        <div class="metric-card admin">
          <div class="metric-label">🏛️ 行政DXの波及</div>
          <div class="metric-value" id="adminImpact">状況確認中</div>
          <div class="metric-detail" id="adminImpactDetail">全体への効果</div>
        </div>
      </div>

      <!-- グラフセクション -->
      <div class="charts-container">
        <div class="chart-wrapper">
          <h3 class="chart-title">⏱️ 必要時間削減率</h3>
          <p class="chart-description">一件当たりに必要な時間をどれだけ短縮できるかを示します</p>
          <canvas id="timeChart"></canvas>
        </div>

        <div class="chart-wrapper">
          <h3 class="chart-title">💹 10年間のROI分析（投資回収期間）</h3>
          <p class="chart-description">実装コスト + 運用保守費 vs 累積削減効果 + 累計回収額。累計回収額がゼロを超えた年が投資回収年です</p>
          <canvas id="roiChart"></canvas>
        </div>
      </div>


    <section id="scalingEfficiencySection" class="scaling-efficiency-section" style="display: block;">
      <div class="scaling-header">
        <h2>📈 スケーリング効率分析</h2>
        <p class="scaling-subtitle">対象規模が変わるとROI（投資対効果）がどう変化するか可視化します</p>
      </div>

      <div class="scaling-chart-container">
        <canvas id="scalingEfficiencyChart"></canvas>
      </div>

      <div class="scaling-insights">
        <h3>💡 スケーリング効率の重要性</h3>
        <ul>
          <li><strong>実装コスト</strong>：規模に関わらずほぼ一定（システム開発・導入研修）</li>
          <li><strong>削減効果</strong>：対象人口に比例して増加</li>
          <li><strong>結果</strong>：規模が大きいほどROI（投資対効果）が劇的に向上</li>
        </ul>
      </div>
    </section>

    
      <!-- 分野別詳細（折り畳み可能） -->
      <div class="collapsible-section">
        <h3 class="section-title collapsible-header">
          <span>📋 分野別の詳細指標</span>
          <button class="toggle-btn" aria-label="セクションを開閉">▼</button>
        </h3>
        <div class="collapsible-content" style="display: none;">
          <div id="domainDetailsGrid" class="domain-details-grid"></div>
        </div>
      </div>


      
      <!-- データ設定説明 -->
      <div class="data-explanation">
        <h3>📋 シミュレーション条件</h3>
        <div class="explanation-grid">
          <div class="explanation-item">
            <strong>対象自治体：</strong>人口100万人規模の都市圏
          </div>
          <div class="explanation-item">
            <strong>試算期間：</strong>年間ベース（稼働日数252日）
          </div>
          <div class="explanation-item">
            <strong>人件費単価：</strong>時給3,000円（行政職員平均）
          </div>
          <div class="explanation-item">
            <strong>データ根拠：</strong>各分野の実績値と先行自治体の導入事例を基に算出
          </div>
        </div>
        <!-- 分野別データソース説明（折り畳み可能） -->
        <div class="data-sources-section collapsible-section">
          <h4 class="collapsible-header">
            <span>📊 各分野のデータソース</span>
            <button class="toggle-btn" aria-label="セクションを開閉">▼</button>
          </h4>
          <div class="collapsible-content" style="display: none;">
            <div id="domainDataSources" class="domain-sources-grid">
              <!-- 動的生成（home.js）-->
            </div>
          </div>
        </div>
        
        <p class="data-explanation-note">※ 本分析は複数の公開データと先行導入事例を基に算出しています。実装効果は自治体規模・既存システム・職員スキルにより変動します。</p>        <p class="explanation-note">
          ※ 本分析は、各分野のDX・AI導入レベル（Plain/Smart/AI）を組み合わせた場合の効果を動的に計算しています。
          実際の導入効果は、自治体規模・既存システム・運用体制により変動します。
        </p>
      </div>

    
      <!-- 行政DXの波及効果（折り畳み可能） -->
      <div class="collapsible-section">
        <h3 class="section-title collapsible-header">
          <span>🏛️ 行政DXが他分野に与える影響</span>
          <button class="toggle-btn" aria-label="セクションを開閉">▼</button>
        </h3>
        <div class="collapsible-content" style="display: none;">
          <div id="impactDetails" class="impact-details">
            <ul></ul>
          </div>
        </div>
      </div>

      <footer class="statistics-footer">
        <p>本分析は、全人口100万人の都市圏におけるシミュレーション結果です。</p>
        <p>実際の導入効果は、自治体規模や既存システムにより異なります。</p>
      </footer>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
  <script src="assets/js/api-client.js"></script>
  <script src="assets/js/state.js"></script>
  <script src="assets/js/home.js"></script>
  <script>
    // デモモード説明カードの表示制御
    document.addEventListener('DOMContentLoaded', function() {
      const params = new URLSearchParams(window.location.search);
      if (params.get('experience') === 'demo') {
        const card = document.getElementById('demoModeInfoCard');
        if (card) card.style.display = 'block';
        const closeBtn = document.getElementById('closeDemoModeInfoBtn');
        if (closeBtn) {
          closeBtn.addEventListener('click', function() {
            card.style.display = 'none';
          });
        }
      }
    });
  </script>
</body>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.plan-card').forEach(card => {
      card.addEventListener('click', () => {
        const target = document.getElementById('statisticsSection');
        if (target) {
          target.scrollIntoView({ behavior: 'smooth' });
        }
      });
    });
  });
</script>
</html>
